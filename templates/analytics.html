<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../static/styles/global.css" />
    <script src="../static/components/header.js" defer></script>
    <script src="../static/components/sidebar.js" defer></script>
    <script src="../static/components/footer.js" defer></script>
  </head>
  <body>
    <app-header></app-header>
    <div class="container">
      <app-sidebar></app-sidebar>
      <main class="main-content">
        <h1 class="text-2xl font-bold mb-4">Analytics</h1>
        <canvas id="analyticsChart"></canvas>
      </main>
      <app-footer></app-footer>
    </div>
    <script>
      const analyticsData = JSON.parse('{{ analytics | tojson | safe }}');
      const ctx = document.getElementById('analyticsChart').getContext('2d');
      new Chart(ctx, {
          type: 'bar',
          data: {
              labels: analyticsData.domains,
              datasets: [
                  {
                      label: 'Users',
                      data: analyticsData.users,
                      backgroundColor: 'rgba(75, 192, 192, 0.6)'
                  },
                  {
                      label: 'Blogs',
                      data: analyticsData.blogs,
                      backgroundColor: 'rgba(54, 162, 235, 0.6)'
                  },
                  {
                      label: 'Resources',
                      data: analyticsData.resources,
                      backgroundColor: 'rgba(255, 206, 86, 0.6)'
                  },
                  {
                      label: 'Thank-You Pages',
                      data: analyticsData.thank_you,
                      backgroundColor: 'rgba(153, 102, 255, 0.6)'
                  }
              ]
          },
          options: {
              responsive: true,
              plugins: {
                  legend: {
                      position: 'top'
                  },
                  title: {
                      display: true,
                      text: 'Analytics Overview'
                  }
              }
          }
      });
    </script>
  </body>
</html>
